(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{371:function(t,a,s){"use strict";s.r(a);var e=s(45),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"civi-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#civi-对象"}},[t._v("#")]),t._v(" "),s("code",[t._v("civi")]),t._v(" 对象")]),t._v(" "),s("h2",{attrs:{id:"root-pathx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#root-pathx"}},[t._v("#")]),t._v(" ROOT_PATHx")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" string")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 项目根目录")])]),t._v(" "),s("h2",{attrs:{id:"app-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app-path"}},[t._v("#")]),t._v(" APP_PATH")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" string")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 项目根下的"),s("code",[t._v("src")]),t._v("目录")])]),t._v(" "),s("h2",{attrs:{id:"runtime-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#runtime-path"}},[t._v("#")]),t._v(" RUNTIME_PATH")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" string")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 项目运行产生的文件，存放缓存，session和日志等文件")])]),t._v(" "),s("h2",{attrs:{id:"isdev"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isdev"}},[t._v("#")]),t._v(" isDev")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" boolean")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 是否开发环境")])]),t._v(" "),s("h2",{attrs:{id:"app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app"}},[t._v("#")]),t._v(" app")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" Koa")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" Koa服务的实例")])]),t._v(" "),s("h2",{attrs:{id:"config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" config")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" object")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 配置信息")])]),t._v(" "),s("h2",{attrs:{id:"logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logs"}},[t._v("#")]),t._v(" logs")]),t._v(" "),s("h3",{attrs:{id:"success"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#success"}},[t._v("#")]),t._v(" success")]),t._v(" "),s("ul",[s("li",[t._v("成功日志 "),s("code",[t._v("civi.logs.success('输出信息')")])])]),t._v(" "),s("h3",{attrs:{id:"error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#error"}},[t._v("#")]),t._v(" error")]),t._v(" "),s("ul",[s("li",[t._v("错误日志 "),s("code",[t._v("civi.logs.error('输出信息')")])])]),t._v(" "),s("h3",{attrs:{id:"warn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#warn"}},[t._v("#")]),t._v(" warn")]),t._v(" "),s("ul",[s("li",[t._v("警告日志 "),s("code",[t._v("civi.logs.warn('输出信息')")])])]),t._v(" "),s("h3",{attrs:{id:"debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debug"}},[t._v("#")]),t._v(" debug")]),t._v(" "),s("ul",[s("li",[t._v("debug日志 "),s("code",[t._v("civi.logs.debug('输出信息')")])])]),t._v(" "),s("h3",{attrs:{id:"info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#info"}},[t._v("#")]),t._v(" info")]),t._v(" "),s("ul",[s("li",[t._v("info日志 "),s("code",[t._v("civi.logs.info('输出信息')")])])]),t._v(" "),s("h2",{attrs:{id:"uuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uuid"}},[t._v("#")]),t._v(" uuid")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("说明")]),t._v(" 生成UUID")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("civi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncivi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'v4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[t._v("#")]),t._v(" Controller")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" class")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 控制器类")])]),t._v(" "),s("h3",{attrs:{id:"ctx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ctx"}},[t._v("#")]),t._v(" ctx")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" KoaCentext")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" Koa请求的上下文对象")])]),t._v(" "),s("h3",{attrs:{id:"header"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#header"}},[t._v("#")]),t._v(" header")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" function(name, value) : any")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 获取请求的header参数")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" token "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置header参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'token'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456789'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"ffmpeg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg"}},[t._v("#")]),t._v(" ffmpeg")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" object")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 封装了一些媒体操作的方法")])]),t._v(" "),s("h3",{attrs:{id:"getrtspimage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getrtspimage"}},[t._v("#")]),t._v(" getRtspImage")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" (rtsp: string): Promise<string>")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 验证rtsp连接的有效性，并返回预览图片")])]),t._v(" "),s("h3",{attrs:{id:"imgstovideo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#imgstovideo"}},[t._v("#")]),t._v(" imgsToVideo")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" (...params): Promise<any>\n"),s("ul",[s("li",[t._v("source 输入源")]),t._v(" "),s("li",[t._v("fps 视频帧数")]),t._v(" "),s("li",[t._v("output 视频输出路径")]),t._v(" "),s("li",[t._v("start 视频输出路径")]),t._v(" "),s("li",[t._v("time 视频时长/秒")]),t._v(" "),s("li",[t._v("size 视频分辨率")])])]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 批量图片合成视频文件")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tempPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%01d.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" video "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.mp4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 视频地址")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" civi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ffmpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("imgsToVideo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"basecontroller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basecontroller"}},[t._v("#")]),t._v(" BaseController")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" class")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 继承与"),s("code",[t._v("Controller")]),t._v(" 类拥有Controller类的全部方法和属性 用于插件的控制器实例")])]),t._v(" "),s("h3",{attrs:{id:"plg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plg"}},[t._v("#")]),t._v(" plg")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("类型")]),t._v(" Plugin")]),t._v(" "),s("li",[s("code",[t._v("说明")]),t._v(" 对应当前插件的实例")])])])}),[],!1,null,null,null);a.default=r.exports}}]);